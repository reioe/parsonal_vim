2014-09-18 EtceteraForWriteTracWiki

# TracWikiを書くことについてのエトセトラ

# 環境の整備

### MoinMoinのシンタックスハイライトを入れよう

マークアップ言語をエディタで書くにあたっては、シンタックスハイライトは必須である。
理由は以下のとおり。

* プレビューをある程度担保する
シンタックスの定義がマークアップ言語の書式適用と正しく対応していれば、
ハイライトが書式の適用を保証してくれる。結果プレビューと修正の往復が少なくなる。

* 楽しい
大事。

* どのシンタックスを使うか
TracWikiと名打たれたハイライト定義もあったけど、MoinMoinを使う。
なんでWikiフォーマットの名前って変なのばっかりなの? (※1)
moinmo.inのページからダウンロード出来るよ。
http://moinmo.in/VimHighlighting?action=AttachFile&do=view&target=moin.vim
多分サクラエディタとかにもあるんじゃなかろうか。



### シンタックスを有効にする

マークアップ言語は最終的にWebフォームに貼り付けるためローカルに保存することなく
エディタの新規作成状態でモリモリ書いたり、Webからソースをコピペして修正入れたりする。
(もちろん良くない。ちゃんと保存する癖をつけよう!)


シンタックスの指定をメニューから選ぶのは面倒なので、
ファイルタイプを指定してシンタックスの自動有効を効かせる。


``

set ft=moin

``

### パスカルケースの"!"サフィックス適用

サクラエディタで作ったマクロがあるのだけれど、
Vimの正規表現は鬼車が使えない。
3段階の置換でスクリプトをこさえてみているが、調整中…
当面、サクラエディタに移して適用。


## TracWikiのレビューチケットの反映手法
TracWikiを使う頻度が最も高いのがレビューチケット。
入口付近の島チームのレビューチケットの方式で、効率的な方法を探ってみる

### 入口付近の島チームのレビューチケットの書式
* 構成

|:---------------|:-------------|
|レビュー内容(1) |レビュアー記述|
|レビュー反映(1) |レビュイー記述|
|レビュー内容(2) |レビュアー記述|
|レビュー反映(2) |レビュイー記述|

…

* レビュー反映の内容
レビュー内容はDisc型リストで書かれていて、
その指摘に続けてインデント下げてBold強調して入れる。
例:
* ここをこうしてね
    * **こうしたよ**

以上を前提として、以下に手法を書いてみる

###  折りたたみを活用する
レビューチケットのWikiは長大になりやすいので、
記述中は不要な箇所は折りたたむ。
レビュー反映(2)を記述中は(1)をたたむなど。

``
zf(ビジュアルモードで選択中)
``

やらなくてもよいが、やっておくと精神的によい。
(スッキリするし、意図しない変更を避けられる)

###  Disc型＋強調をAbbreviationに登録しておく

``
 * ''' '''
``

を書くのが割とメンド臭いので


``
ab *' * ''' ''' 
``

をvimrcに書いておく。


### 先に対応を書いて、タスクリスト化する 

対応を先に記述し、先頭にチェックボックスを付けておく。上から順に対応して、チェックをつける。
(画像はGFM方式のチェックボックス) 
というようなやり方を最近試みているが、指摘をきちんと噛み砕けてなかったり、いまいち…
手法の問題か、手法に頼って怠ける心の問題か…

ということで、効率的なやり方模索中です。

---

※1 "PukiWiki"とか。"Wiki"自体最初は変だなあって思ってました。ハワイの言葉でしたっけ。
その流れで名づけてるんだろうなあ。
あ、そういえばNine Inch Nailsのホームページに"NINWiki"というのがあって…

